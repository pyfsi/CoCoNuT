
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="site_description">
      
      
      
      
      <link rel="icon" href="assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.9">
    
    
      
        <title>OpenFOAM - CoCoNuT</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.f1a3b89f.min.css">
        
          
          
          <meta name="theme-color" content="#4cae4f">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="green" data-md-color-accent="green">
  
    
    <script>function __prefix(e){return new URL(".",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#openfoam" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="CoCoNuT" class="md-header__button md-logo" aria-label="CoCoNuT" data-md-component="logo">
      
  <img src="images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CoCoNuT
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OpenFOAM
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/pyfsi/coconut" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="CoCoNuT" class="md-nav__button md-logo" aria-label="CoCoNuT" data-md-component="logo">
      
  <img src="images/logo.png" alt="logo">

    </a>
    CoCoNuT
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/pyfsi/coconut" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        Introduction
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Introduction" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Introduction
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        CoCoNuT
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      <label class="md-nav__link" for="__nav_2">
        Coupling components
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Coupling components" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Coupling components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="coupling_components.html" class="md-nav__link">
        General
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="convergence_criteria.html" class="md-nav__link">
        Convergence criteria
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      <label class="md-nav__link" for="__nav_2_3">
        Coupled solvers
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Coupled solvers" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Coupled solvers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="coupled_solvers.html" class="md-nav__link">
        Coupled solvers
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="models.html" class="md-nav__link">
        Models
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="mappers.html" class="md-nav__link">
        Mappers
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="predictors.html" class="md-nav__link">
        Predictors
      </a>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" type="checkbox" id="__nav_2_6" checked>
      
      <label class="md-nav__link" for="__nav_2_6">
        Solver wrappers
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Solver wrappers" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          Solver wrappers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="solver_wrappers.html" class="md-nav__link">
        General
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="abaqus.html" class="md-nav__link">
        Abaqus
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="fluent.html" class="md-nav__link">
        Fluent
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="kratos.html" class="md-nav__link">
        Kratos
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          OpenFOAM
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="openfoam.html" class="md-nav__link md-nav__link--active">
        OpenFOAM
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview-of-the-openfoam-wrapper" class="md-nav__link">
    Overview of the OpenFOAM-wrapper
  </a>
  
    <nav class="md-nav" aria-label="Overview of the OpenFOAM-wrapper">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-__init__-method" class="md-nav__link">
    The __init__ method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-initialize-method" class="md-nav__link">
    The initialize method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-initialize_solution_step-method" class="md-nav__link">
    The initialize_solution_step method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-solve_solution_step-method" class="md-nav__link">
    The solve_solution_step method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-finalize_solution_step-method" class="md-nav__link">
    The finalize_solution_step method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-finalize-method" class="md-nav__link">
    The finalize method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    Comments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview-of-an-openfoam-solver-used-in-coconut" class="md-nav__link">
    Overview of an OpenFOAM-solver used in CoCoNuT
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-a-new-case" class="md-nav__link">
    Setting up a new case
  </a>
  
    <nav class="md-nav" aria-label="Setting up a new case">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comments_1" class="md-nav__link">
    Comments
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-specific-documentation" class="md-nav__link">
    Version specific documentation
  </a>
  
    <nav class="md-nav" aria-label="Version specific documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#v41-openfoam-41" class="md-nav__link">
    v41 (OpenFOAM 4.1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#v8-openfoam-8" class="md-nav__link">
    v8 (OpenFOAM 8)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="python.html" class="md-nav__link">
        Python
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Data structure
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Data structure" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Data structure
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="data_structure.html" class="md-nav__link">
        Data structure
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Documentation
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Documentation" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="docs.html" class="md-nav__link">
        Documentation
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Examples
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="examples.html" class="md-nav__link">
        General
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      <label class="md-nav__link" for="__nav_5_2">
        Tube
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Tube" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Tube
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="tube_tube_flow_tube_structure.html" class="md-nav__link">
        Python TubeFlow - Python TubeStructre
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="tube_tube_flow_tube_ringmodel.html" class="md-nav__link">
        Python TubeFlow - Python TubeRingmodel
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="tube_tube_flow_abaqus2d.html" class="md-nav__link">
        Python TubeFlow - Abaqus 2D
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="tube_fluent2d_tube_structure.html" class="md-nav__link">
        Fluent 2D - Python TubeStructure
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="tube_fluent2d_abaqus2d.html" class="md-nav__link">
        Fluent 2D - Abaqus 2D
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="tube_fluent2d_abaqus2d_steady.html" class="md-nav__link">
        Fluent 2D - Abaqus 2D - Steady
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="tube_fluent3d_abaqus2d.html" class="md-nav__link">
        Fluent 3D - Abaqus 2D
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="tube_fluent3d_abaqus3d.html" class="md-nav__link">
        Fluent 3D - Abaqus 3D
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="tube_fluent3d_kratos_structure3d.html" class="md-nav__link">
        Fluent 3D - Kratos Structure 3D
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="tube_openfoam3d_abaqus3d.html" class="md-nav__link">
        OpenFOAM 3D - Abaqus 3D
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="tube_openfoam3d_kratos_structure3d.html" class="md-nav__link">
        OpenFOAM 3D - Kratos Structure 3D
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" >
      
      <label class="md-nav__link" for="__nav_5_3">
        Turek benchmark
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Turek benchmark" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Turek benchmark
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="turek_fluent2d_abaqus2d.html" class="md-nav__link">
        Fluent 2D - Abaqus 2D
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="turek_fluent2d_abaqus2d_steady.html" class="md-nav__link">
        Fluent 2D - Abaqus 2D - Steady
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="test_single_solver.html" class="md-nav__link">
        Test single solver
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Tests
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Tests" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Tests
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="tests.html" class="md-nav__link">
        Tests
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview-of-the-openfoam-wrapper" class="md-nav__link">
    Overview of the OpenFOAM-wrapper
  </a>
  
    <nav class="md-nav" aria-label="Overview of the OpenFOAM-wrapper">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-__init__-method" class="md-nav__link">
    The __init__ method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-initialize-method" class="md-nav__link">
    The initialize method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-initialize_solution_step-method" class="md-nav__link">
    The initialize_solution_step method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-solve_solution_step-method" class="md-nav__link">
    The solve_solution_step method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-finalize_solution_step-method" class="md-nav__link">
    The finalize_solution_step method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-finalize-method" class="md-nav__link">
    The finalize method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    Comments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview-of-an-openfoam-solver-used-in-coconut" class="md-nav__link">
    Overview of an OpenFOAM-solver used in CoCoNuT
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-a-new-case" class="md-nav__link">
    Setting up a new case
  </a>
  
    <nav class="md-nav" aria-label="Setting up a new case">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comments_1" class="md-nav__link">
    Comments
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-specific-documentation" class="md-nav__link">
    Version specific documentation
  </a>
  
    <nav class="md-nav" aria-label="Version specific documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#v41-openfoam-41" class="md-nav__link">
    v41 (OpenFOAM 4.1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#v8-openfoam-8" class="md-nav__link">
    v8 (OpenFOAM 8)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="openfoam">OpenFOAM</h1>
<p>This is the documentation for all OpenFOAM solver wrappers. Currently, only FSI simulations are supported, no other
multiphysics problems.</p>
<h2 id="parameters">Parameters</h2>
<p>This section describes the parameters in the JSON file, listed in alphabetical order.</p>
<table>
<thead>
<tr>
<th align="right">parameter</th>
<th align="center">type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right"><nobr><code>application</code></nobr></td>
<td align="center">string</td>
<td>Name of the (adapted) OpenFOAM-solver to be used for the flow problem. This name should start with <code>coconut_</code>.</td>
</tr>
<tr>
<td align="right"><nobr><code>boundary_names</code></nobr></td>
<td align="center">list</td>
<td>List of names of the patches corresponding to the interface. These names should match the patch names defined in the OpenFOAM-case.</td>
</tr>
<tr>
<td align="right"><code>delta_t</code></td>
<td align="center">double (optional)</td>
<td>Fixed timestep size in flow solver.</td>
</tr>
<tr>
<td align="right"><code>density</code></td>
<td align="center">int</td>
<td>The applied density of the fluid in an incompressible case. The density will be applied if <code>is_incompressible</code> is set to <code>true</code>.</td>
</tr>
<tr>
<td align="right"><nobr><code>interface_input</code></nobr></td>
<td align="center">dict</td>
<td>List of dictionaries that describes the input <code>Interface</code>. This provides the  interface boundary conditions for the OpenFOAM solver. Each entry in the list has two keys: <code>model_part</code> and <code>variables</code>, with values as name of the model part and list of input variables, respectively. The input variables in the list should be chosen from the  <code>variables_dimensions</code> <code>dict</code> in  the file <em><code>coconut/data_structure/variables.py</code></em>. The model part name must be the concatenation of an entry from <code>boundary_names</code> and the string <code>_input</code>.</td>
</tr>
<tr>
<td align="right"><nobr><code>interface_output</code></nobr></td>
<td align="center">dict</td>
<td>Analogous to <code>interface_input</code>, but here the name must be the concatenation of an entry from <code>boundary_names</code> and the string <code>_output</code>. The entries in the list provides boundary conditions for the other solver(s) participating in the coupled simulation.</td>
</tr>
<tr>
<td align="right"><nobr><code>is_incompressible</code></nobr></td>
<td align="center">boolean</td>
<td>Set it to <code>True</code> if the solver solves incompressible Navier-Stokes equation.</td>
</tr>
<tr>
<td align="right"><nobr><code>parallel</code></nobr></td>
<td align="center">boolean</td>
<td>Set it to <code>True</code> if OpenFOAM solver is required to run in parallel. The required decomposition method and number of cores should be provided in the <em><code>&lt;case_directory&gt;/system/decomposeParDict</code></em> file.</td>
</tr>
<tr>
<td align="right"><nobr><code>residual_variables</code></td>
<td align="center">list (optional)</td>
<td>A list containing OpenFOAM variables whose residuals you need to output. If provided, this will output the last initial residual of the pimple iterations for each FSI-coupling iteration in <em><code>&lt;case_directory&gt;/residuals.csv</code></em>.</td>
</tr>
<tr>
<td align="right"><nobr><code>time_precision</code></nobr></td>
<td align="center">int</td>
<td>Number of digits after the decimal sign to be used in the name of the time step directories which are made during execution.</td>
</tr>
<tr>
<td align="right"><code>timestep_start</code></td>
<td align="center">int (optional)</td>
<td>Time step to (re)start a transient FSI calculation from. If 0 is given, the simulation starts from t = 0, else the code looks for the relevant case and data files.</td>
</tr>
<tr>
<td align="right"><nobr><code>working_directory</code></nobr></td>
<td align="center">string</td>
<td>Directory where the OpenFOAM-case is defined (and which contains the JSON-file).</td>
</tr>
</tbody>
</table>
<p><code>timestep_start</code> and <code>delta_t</code> are necessary parameters, but are usually defined already in the parameters of the
coupled solver. However, they can also be given directly as parameter of the solver wrapper (e.g. for standalone
testing). If they are defined both in the coupled solver and in the solver wrapper, then the former value is used, and a
warning is printed.</p>
<h2 id="overview-of-the-openfoam-wrapper">Overview of the OpenFOAM-wrapper</h2>
<p>The solver wrapper can be found in <em><code>solver_wrappers/openfoam</code></em> and consists of a python-file named <em><code>vX.py</code></em>, with <code>X</code>
the identifier of the OpenFOAM-version (e.g. <em><code>v41.py</code></em> for OpenFOAM 4.1). Finally, using an OpenFOAM-solver in CoCoNuT
requires the adaptation of the solver to accommodate communications with the <code>coupled_solvers</code> during the
FSI-simulation. Currently, only <code>pimpleFoam</code> and <code>interFoam</code> have been adapted; the solvers called by the solver wrapper
have the same name as the original OpenFOAM-solver but with the prefix <code>coconut_</code>. Upon using the OpenFOAM-wrapper, the
solver to be used upon execution needs to be compiled using the default OpenFOAM-compilation method (loading the
OpenFOAM-module and using <code>wmake</code> in the directory <em><code>solver_wrapper/coconut_&lt;solver_name&gt;</code></em>).</p>
<h3 id="the-__init__-method">The <code>__init__</code> method</h3>
<p>During initialization, the case settings as defined in the JSON-file are read into the corresponding python-variables.
Afterwards, the required OpenFOAM-files are modified, and some checks are in place to verify whether the correct modules
are loaded. Next, the model-parts for the <code>interface_input/output</code> are created. Finally, the variables on each interface
are stored in the data-structure of CoCoNuT.</p>
<h3 id="the-initialize-method">The <code>initialize</code> method</h3>
<p>The OpenFOAM-solver, which should be adapted to work with CoCoNuT, is launched in a subprocess. Other variables, such as
time step index and physical time, are initialized.</p>
<h3 id="the-initialize_solution_step-method">The <code>initialize_solution_step</code> method</h3>
<p>This function is called at the start of every time step. The time step index is increased by one, the iteration index is
set to zero, and the OpenFOAM file directory is made in which the time step data needs to be stored.</p>
<h3 id="the-solve_solution_step-method">The <code>solve_solution_step</code> method</h3>
<p>The interface displacement is converted into an OpenFOAM-readable format (with the function <code>write_node_input</code>), after
which the OpenFOAM-loop is called in a subprocess. After completion of the OpenFOAM-loop, the
function <code>read_node_output</code> is called, which reads the interface loads from the corresponding OpenFOAM-directory (in
the <em><code>postProcessing</code></em> folder).</p>
<h3 id="the-finalize_solution_step-method">The <code>finalize_solution_step</code> method</h3>
<p>In this method, it is checked whether the other flow variables need to be written in an OpenFOAM-directory. This
save-option is done in OpenFOAM.</p>
<h3 id="the-finalize-method">The <code>finalize</code> method</h3>
<p>The OpenFOAM-subprocess, which was launched in the <code>Initialize</code> method, is killed.</p>
<h2 id="comments">Comments</h2>
<ul>
<li>Files with extension <code>.coco</code> are used to pass messages between python-script and OpenFOAM. After sending a message
  from python to OpenFOAM, the python-script is paused until it receives the corresponding message from OpenFOAM. The
  OpenFOAM-solver is operating in an infinite <code>while</code>-loop until it receives a message from Python. Upon receipt of this
  message, OpenFOAM executes the corresponding action after which it sends a response to Python and reverts into its
  infinite loop (waiting mode).</li>
<li>The aforementioned messaging procedure implies that OpenFOAM is constantly running during execution of the
  CoCoNuT-simulation. It is closed by the Python-code only in the <code>Finalize</code> method, but if CoCoNuT crashes, the
  OpenFOAM-programme keeps running. The user should take care to kill that OpenFOAM-loop manually (using <code>kill</code>
  or <code>pkill</code> in the Linux-terminal, e.g. <code>pkill coconut_*</code>).</li>
<li>The interface displacement is stored in a <code>pointDisplacement</code> field, which is read in by OpenFOAM in every iteration (
  this required some adaptation of the solver, see next section). The dynamic mesh motion is handled by OpenFOAM itself.</li>
<li>The interface loads are stored in the directory <em><code>postProcessing</code></em>, under the names <em><code>PRESSURE_&lt;boundary_name&gt;</code></em>
  and <em><code>TRACTION_&lt;boundary_name&gt;</code></em>. These are constructed from the file <em><code>controlDict</code></em>, defined in the <code>_init_</code> method
  of the solver wrapper in python.</li>
</ul>
<h2 id="overview-of-an-openfoam-solver-used-in-coconut">Overview of an OpenFOAM-solver used in CoCoNuT</h2>
<p>Default OpenFOAM-solvers cannot be used in the CoCoNuT-framework, but need to be modified. The adapted solvers are
stored in the <em><code>coconut/coupling_components/solver_wrappers</code></em> directory and receive the name <em><code>coconut_&lt;solver_name&gt;</code></em>,
where <code>solver_name</code> is the name of the original solver, e.g. <code>pimpleFoam</code>. If a new solver needs to be adapted to work
with CoCoNuT, one of the already established solvers can work as an example. In brief, the following steps should be
undertaken:</p>
<ul>
<li>Except for the initial <code>include</code>-statements, the entire solver code should be put in a loop that starts
  with <code>while(true)</code>.</li>
<li>Just before this while-loop, add the statement <code>runTime.run();</code>! This is important as it creates and initializes the
  functionObjects in the <em><code>controlDict</code></em> file which will be used for storing the interface loads.</li>
<li>Due to the fact that the infinite loop is driven by <code>while(true)</code> and not the default
  OpenFOAM-expression <code>while(runTime.run())</code>, OpenFOAM does not check itself whether the final time step is reached. In
  proper CoCoNuT-operation, OpenFOAM is killed when the solver wrapper reaches the final time step.</li>
<li>Inside the while-loop, a sleep-command is added such that the solver is not constantly checking the conditional
  statements.</li>
<li>The while-loop contains several conditional statements, each of which check whether the python-code in CoCoNuT has
  sent a message to the OpenFOAM-solver. This message is sent by creating an empty file with a specific name in the
  OpenFOAM-directory. The following file names should be checked by the OpenFOAM-solver: <em><code>next.coco</code></em>
  , <em><code>continue.coco</code></em>, <em><code>save.coco</code></em>, <em><code>stop.coco</code></em>.</li>
<li>If the file <em><code>next.coco</code></em> exists, the runTime-object should be increased by one. OpenFOAM should create a
  file <em><code>next_ready.coco</code></em> upon completion. Do not forget to delete the original <em><code>next.coco</code></em> file, which is advised to
  do just before creating the <em><code>next_ready.coco</code></em>, so near the end of the <code>if</code>-clause.</li>
<li>If the file <em><code>continue.coco</code></em> exists, the flow equations need to be solved. This <code>if</code>-statement consequently contains
  most of the original solver definition, in which the flow equations are called in the same order as in the original
  CFD solver. OpenFOAM should create a file <em><code>continue_ready.coco</code></em> upon completion. Do not forget to delete the
  original <code>continue.coco</code>-file, which is advised to do just before creating the <code>continue_ready.coco</code>, so near the end
  of the <code>if</code>-clause.</li>
<li>If the file <em><code>save.coco</code></em> exists, OpenFOAM checks whether the flow variables should be stored in corresponding files,
  according to the user-defined save interval. OpenFOAM should create a file <em><code>save_ready.coco</code></em> upon completion. Do not
  forget to delete the original <em><code>save.coco</code></em> file, which is advised to do just before creating the <em><code>save_ready.coco</code></em>,
  so near the end of the <code>if</code>-clause.</li>
<li>If the file <em><code>stop.coco</code></em> exists, a <code>break</code>-statement should end the infinite loop (the subprocess is also killed in
  the python-code). OpenFOAM should create a file <em><code>stop_ready.coco</code></em> before breaking the <code>while</code>-loop. Do not forget to
  delete the original <em><code>stop.coco</code></em> file, which is advised to do just before creating the <em><code>stop_ready.coco</code></em>, so near
  the end of the <code>if</code>-clause.</li>
</ul>
<h2 id="setting-up-a-new-case">Setting up a new case</h2>
<p>Following items should be present in the OpenFOAM-directory prior to launching CoCoNuT:</p>
<ul>
<li>The entire framework of the CFD-case in OpenFOAM which is to be used in the CoCoNuT simulation (so it should contain
  the <code>constant</code> and <code>system</code> directory as well as the <em><code>0</code></em> directory). The working directory should be defined as if
  you would like to run it as a CFD case. The working directory is defined in a JSON-file and therefore the
  CoCoNuT-files do not need to be in the same folder as the OpenFOAM-case.</li>
<li>a JSON-file containing all the settings stipulated above.</li>
</ul>
<p>Following files are modified or used as a reference to create files by CoCoNuT, and must be included in the original
OpenFOAM-directory:</p>
<ul>
<li><em><code>system/controlDict</code></em> with compulsory arguments:</li>
</ul>
<table>
<thead>
<tr>
<th align="center">key</th>
<th align="left">value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>writeControl</code></td>
<td align="left"><code>timeStep</code></td>
</tr>
<tr>
<td align="center"><code>writeInterval</code></td>
<td align="left">required write interval</td>
</tr>
<tr>
<td align="center"><code>writeFormat</code></td>
<td align="left"><code>ascii</code></td>
</tr>
<tr>
<td align="center"><code>timeFormat</code></td>
<td align="left"><code>fixed</code></td>
</tr>
<tr>
<td align="center"><code>timePrecision</code></td>
<td align="left">required time precision based on <code>delta_t</code> (used in the names of time step folders)</td>
</tr>
<tr>
<td align="center"><code>runTimeModifiable</code></td>
<td align="left"><code>false</code></td>
</tr>
<tr>
<td align="center"><code>adjustTimeStep</code></td>
<td align="left"><code>no</code></td>
</tr>
</tbody>
</table>
<ul>
<li><em><code>constant/dynamicMeshDict</code></em>which contains the settings for OpenFOAM's dynamic motion solver</li>
<li><em><code>system/decomposeParDict</code></em> with the necessary decomposition of the fluid domain (if <code>cores</code>&gt;1)</li>
<li><em><code>0/pointDisplacement</code></em> with all the boundary conditions, including <code>fixedValue</code> boundary condition for the FSI
  boundaries. This is used as a template for the <em><code>pointDisplacement_Next</code></em> to supply displacement boundary conditon (
  from structural solver) for the FSI-interface.</li>
</ul>
<h3 id="comments_1">Comments</h3>
<ul>
<li>It is probably best to derive a new case from the directory containing FSI simulation with OpenFOAM
  in <em><code>coconut/examples/</code></em> in order to copy its structure.</li>
<li>If you do not use an OpenFOAM-solver which is already converted for operation in CoCoNuT, you will need to adapt the
  solver yourself. This can be done in a rather straightforward way by taking a look at already implemented solvers. You
  should compile the new solver before loading the CoCoNuT-modules as the overwriting of compiler modules can break
  the  <code>wmake</code>-command. Once the new solver is compiled, it works fine even after loading the CoCoNuT-modules.</li>
<li>OpenFOAM is known for generating a lot of files, which is not different in CoCoNuT-operation. Make sure you have
  sufficient storage space on your cluster and that you are able to write large number of files (the latter is
  specifically important when storing data in your home-directory).</li>
</ul>
<h2 id="version-specific-documentation">Version specific documentation</h2>
<h3 id="v41-openfoam-41">v41 (OpenFOAM 4.1)</h3>
<p>First version.</p>
<h3 id="v8-openfoam-8">v8 (OpenFOAM 8)</h3>
<p>In this OpenFOAM version, the name of some commands and classes are different. The required changes are visible in the
version specific solver wrapper python file <em><code>v8.py</code></em>.</p>
<p>Moreover, there are some changes in the case setup. The following list provides some but is not all extensive:</p>
<ul>
<li>The interpolation point for <code>arc</code> definitions using <code>blockMesh</code> has to be on the arc and not just on its 'elongation'</li>
<li>Using a macro expansion, such as <code>$R</code>, in combination with <code>#calc</code>, where an operator follows the macro expansion,
  requires using protection: use <code>#calc "${R}/2</code> instead of <code>#calc "$R/2</code></li>
<li>The file <em><code>constant/turbulenceProperties</code></em> has been renamed to <em><code>constant/momentumTransport</code></em></li>
<li>The keyword <code>residualControl</code> in the <code>PIMPLE</code> dictionary is now called <code>outerCorrectorResidualControl</code>. The
  keyword <code>residualControl</code> still exists, but has a different meaning and is used as in <code>SIMPLE</code>.</li>
<li>The file <em><code>system/fvSolution</code></em> requires dictionaries <code>pcorr</code> and <code>pcorrFinal</code>, if the keyword <code>correctPhi</code> is <code>true</code>
  in <em><code>system/fvSolution</code></em>, which it is by default. The tolerance settings should be sufficiently low (similar to <code>p</code>).</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="kratos.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Kratos" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Kratos
            </div>
          </div>
        </a>
      
      
        
        <a href="python.html" class="md-footer__link md-footer__link--next" aria-label="Next: Python" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Python
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "assets/javascripts/workers/search.477d984a.min.js", "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.82b56eb2.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>