



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="site_description">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>SolverWrapperOpenFOAM - CoCoNuT</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#4caf50">
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="green" data-md-color-accent="green">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#solverwrapperopenfoam" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="CoCoNuT" aria-label="CoCoNuT" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              CoCoNuT
            </span>
            <span class="md-header-nav__topic">
              
                SolverWrapperOpenFOAM
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/pyfsi/coconut" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href=".." class="md-tabs__link">
          Introduction
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../coupling_components/" class="md-tabs__link md-tabs__link--active">
          Coupling components
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../data_structure/" class="md-tabs__link">
          Data structure
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../docs/" class="md-tabs__link">
          Documentation
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../examples/" class="md-tabs__link">
          Examples
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../tests/" class="md-tabs__link">
          Tests
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="CoCoNuT" class="md-nav__button md-logo">
      
        <img alt="logo" src="../images/logo.png" width="48" height="48">
      
    </a>
    CoCoNuT
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/pyfsi/coconut" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href=".." title="CoCoNuT - Coupling Code for Numerical Tools" class="md-nav__link">
      CoCoNuT - Coupling Code for Numerical Tools
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Coupling components
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Coupling components
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../coupling_components/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../convergence_criteria/" title="Convergence criteria" class="md-nav__link">
      Convergence criteria
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      Coupled solvers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        Coupled solvers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../coupled_solvers/" title="Coupled solvers" class="md-nav__link">
      Coupled solvers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../models/" title="Models" class="md-nav__link">
      Models
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mappers/" title="Mappers" class="md-nav__link">
      Mappers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../predictors/" title="Predictors" class="md-nav__link">
      Predictors
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6" checked>
    
    <label class="md-nav__link" for="nav-2-6">
      Solver wrappers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-6">
        Solver wrappers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../abaqus/" title="SolverWrapperAbaqus" class="md-nav__link">
      SolverWrapperAbaqus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fluent/" title="SolverWrapperFluent" class="md-nav__link">
      SolverWrapperFluent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../kratos/" title="SolverWrapperKratos - StructuralMechanicsApplication" class="md-nav__link">
      SolverWrapperKratos - StructuralMechanicsApplication
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        SolverWrapperOpenFOAM
      </label>
    
    <a href="./" title="SolverWrapperOpenFOAM" class="md-nav__link md-nav__link--active">
      SolverWrapperOpenFOAM
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview-of-the-python-file" class="md-nav__link">
    Overview of the Python-file
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-__init__-method" class="md-nav__link">
    The __init__ method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-initialize-method" class="md-nav__link">
    The Initialize method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-initializesolutionstep-method" class="md-nav__link">
    The InitializeSolutionStep method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-solvesolutionstep-method" class="md-nav__link">
    The SolveSolutionStep method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-finalizesolutionstep-method" class="md-nav__link">
    The FinalizeSolutionStep method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-finalize-method" class="md-nav__link">
    The Finalize method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    Comments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview-of-an-openfoam-solver-used-in-coconut" class="md-nav__link">
    Overview of an OpenFOAM-solver used in CoCoNuT
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-a-new-case" class="md-nav__link">
    Setting up a new case
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comments_1" class="md-nav__link">
    Comments
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-specific-documentation" class="md-nav__link">
    Version specific documentation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openfoam_41-openfoam-41" class="md-nav__link">
    OpenFOAM_41 (OpenFOAM 4.1)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../python/" title="SolverWrapperPython" class="md-nav__link">
      SolverWrapperPython
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Data structure
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Data structure
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../data_structure/" title="Data structure" class="md-nav__link">
      Data structure
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../docs/" title="Documentation" class="md-nav__link">
      Documentation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Examples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Tube
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Tube
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tube_tube_flow_tube_structure/" title="Python TubeFlow - Python TubeStructre" class="md-nav__link">
      Python TubeFlow - Python TubeStructre
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tube_tube_flow_tube_ringmodel/" title="Python TubeFlow - Python TubeRingmodel" class="md-nav__link">
      Python TubeFlow - Python TubeRingmodel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tube_tube_flow_abaqus2d/" title="Python TubeFlow - Abaqus 2D" class="md-nav__link">
      Python TubeFlow - Abaqus 2D
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tube_fluent2d_tube_structure/" title="Fluent 2D - Python TubeStructure" class="md-nav__link">
      Fluent 2D - Python TubeStructure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tube_fluent2d_abaqus2d/" title="Fluent 2D - Abaqus 2D" class="md-nav__link">
      Fluent 2D - Abaqus 2D
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tube_fluent2d_abaqus2d_steady/" title="Fluent 2D - Abaqus 2D - Steady" class="md-nav__link">
      Fluent 2D - Abaqus 2D - Steady
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tube_fluent3d_abaqus2d/" title="Fluent 3D - Abaqus 2D" class="md-nav__link">
      Fluent 3D - Abaqus 2D
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tube_fluent3d_abaqus3d/" title="Fluent 3D - Abaqus 3D" class="md-nav__link">
      Fluent 3D - Abaqus 3D
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tube_fluent3d_kratos_structure3d/" title="Fluent 3D - Kratos Structure 3D" class="md-nav__link">
      Fluent 3D - Kratos Structure 3D
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tube_openfoam3d_abaqus3d/" title="OpenFOAM 3D - Abaqus 3D" class="md-nav__link">
      OpenFOAM 3D - Abaqus 3D
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tube_openfoam3d_kratos_structure3d/" title="OpenFOAM 3D - Kratos Structure 3D" class="md-nav__link">
      OpenFOAM 3D - Kratos Structure 3D
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../test_single_solver/" title="Test single solver" class="md-nav__link">
      Test single solver
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Tests
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Tests
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/" title="Tests" class="md-nav__link">
      Tests
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview-of-the-python-file" class="md-nav__link">
    Overview of the Python-file
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-__init__-method" class="md-nav__link">
    The __init__ method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-initialize-method" class="md-nav__link">
    The Initialize method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-initializesolutionstep-method" class="md-nav__link">
    The InitializeSolutionStep method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-solvesolutionstep-method" class="md-nav__link">
    The SolveSolutionStep method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-finalizesolutionstep-method" class="md-nav__link">
    The FinalizeSolutionStep method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-finalize-method" class="md-nav__link">
    The Finalize method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    Comments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview-of-an-openfoam-solver-used-in-coconut" class="md-nav__link">
    Overview of an OpenFOAM-solver used in CoCoNuT
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-a-new-case" class="md-nav__link">
    Setting up a new case
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comments_1" class="md-nav__link">
    Comments
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-specific-documentation" class="md-nav__link">
    Version specific documentation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#openfoam_41-openfoam-41" class="md-nav__link">
    OpenFOAM_41 (OpenFOAM 4.1)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="solverwrapperopenfoam">SolverWrapperOpenFOAM</h1>
<p>This is the documentation for all OpenFOAM solver-wrappers.
Currently only FSI simulations are supported, no other multiphysics problems.</p>
<h2 id="parameters">Parameters</h2>
<p>This section describes the parameters in the JSON file, listed in alphabetical order.</p>
<table>
<thead>
<tr>
<th align="right">parameter</th>
<th align="center">type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right"><code>application</code></td>
<td align="center">string</td>
<td>Name of the (adapted) OpenFOAM-solver to be used for the flow problem. This name should start with <code>CoCoNuT_</code>.</td>
</tr>
<tr>
<td align="right"><code>working_directory</code></td>
<td align="center">string</td>
<td>Directory where the OpenFOAM-case is defined (and which contains the JSON-file).</td>
</tr>
<tr>
<td align="right"><code>dimensions</code></td>
<td align="center">int</td>
<td>Dimension used in flow solver: 2 for 2D and axisymmetric, 3 for 3D.</td>
</tr>
<tr>
<td align="right"><code>start_time</code></td>
<td align="center">double</td>
<td>Physical start time of the simulation. This should correspond to the name of the time step folder in OpenFOAM from which the initial data and boundary conditions are read.</td>
</tr>
<tr>
<td align="right"><code>end_time</code></td>
<td align="center">double</td>
<td>Physical end time of the simulation.</td>
</tr>
<tr>
<td align="right"><code>dt</code></td>
<td align="center">double</td>
<td>Fixed timestep size in flow solver. This parameter is usually specified in a higher <code>Component</code>.</td>
</tr>
<tr>
<td align="right"><code>boundary_names</code></td>
<td align="center">list</td>
<td>List of names of the patches corresponding to the interface. These names should match the patch names defined in the OpenFOAM-case.</td>
</tr>
<tr>
<td align="right"><code>interface_input</code></td>
<td align="center">dict</td>
<td>List of <code>ModelPart</code> names and <code>Variables</code> pairs that provides interface boundary conditions for the OpenFOAM solver. Each entry in the list has two keys: <code>model_part</code> and <code>variables</code> with values as name of the <code>ModelPart</code> and list of input variables available in <code>variables.py</code>. The <code>ModelPart</code> name must be the concatenation of an entry from <code>boundary_names</code> and "_input".</td>
</tr>
<tr>
<td align="right"><code>interface_output</code></td>
<td align="center">dict</td>
<td>Analogous to <code>interface_input</code>, but here the name must be the concatenation of an entry from <code>boundary_names</code> and "_output". The entries in the list provides boundary conditions for the other solver(s) participating in the coupled simulation.</td>
</tr>
<tr>
<td align="right"><code>cores</code></td>
<td align="center">int</td>
<td>Number of cores on which the OpenFOAM-solver can run. This variable will be replaced in the raw <code>decomposeParDict</code>-file, after which the case is decomposed of the given number of cores.</td>
</tr>
<tr>
<td align="right"><code>decomposeMethod</code></td>
<td align="center">string</td>
<td>Name of the mesh decomposition method to be used in OpenFOAM (e.g. <code>simple</code>,<code>scotch</code>...).</td>
</tr>
<tr>
<td align="right"><code>write_interval</code></td>
<td align="center">double</td>
<td>Period between subsequent saves of the entire flow field.</td>
</tr>
<tr>
<td align="right"><code>write_precision</code></td>
<td align="center">int</td>
<td>Number of digits after the decimal sign to be used when writing data to time step folders or the <code>postProcessing</code>-folder.</td>
</tr>
<tr>
<td align="right"><code>time_precision</code></td>
<td align="center">int</td>
<td>Number of digits after the decimal sign to be used in the name of the time step directories which are made during execution.</td>
</tr>
<tr>
<td align="right"><code>meshmotion_solver</code></td>
<td align="center">string</td>
<td>Name of the mesh motion solver to be used in OpenFOAM (e.g. <code>displacementLaplacian</code>...).</td>
</tr>
<tr>
<td align="right"><code>diffusivity</code></td>
<td align="center">string</td>
<td>Name of the diffusivity constant used in the mesh motion solver in OpenFOAM (e.g. <code>inverseDistance</code>...).</td>
</tr>
</tbody>
</table>
<h2 id="overview-of-the-python-file">Overview of the Python-file</h2>
<p>The solver-wrapper itself consists of only one Python-file: <code>OpenFOAM_X.py</code>, with <code>X</code>the identifier of the OpenFOAM-version (e.g. <code>41</code> for OpenFOAM 4.1). Aside from this, the Python-file constructs a number of files such as <code>controlDict</code>, <code>pointDisplacement</code> and <code>decomposeParDict</code> by starting from the <code>_raw</code>-files in the solver-wrapper directory and replacing the names of the settings with their user-defined values (listed in the table above). Finally, using an OpenFOAM-solver in CoCoNuT requires the adaptation of the solver to accomodate the internal messaging system used during the FSI-simulation. Currently, only <code>pimpleFoam</code> and <code>interFoam</code> have been adapted; the solvers called by the solver-wrapper have the same name as the original OpenFOAM-solver but with <code>CoCoNuT_</code> added to the name. Upon using the OpenFOAM-wrapper, the solver to be used upon execution needs to be compiled using the default OpenFOAM-compilation method (loading the OpenFOAM-module and using <code>wmake</code>).</p>
<h3 id="the-__init__-method">The <code>__init__</code> method</h3>
<p>During initialization, the case settings as defined in the JSON-file are read into the corresponding Python-variables. Afterwards, the required OpenFOAM-files are constructed and some checks are in place to verify whether the necessary (and correct) modules are loaded. Next, the interface names are loaded and the tool <code>writeCellCentres</code> is used to read in the points located on said interfaces. Finally, the variables on each interface are stored in the data-structure of CoCoNuT. </p>
<h3 id="the-initialize-method">The <code>Initialize</code> method</h3>
<p>The OpenFOAM-solver, which should be adapted to operation in CoCoNuT, is launched in a subprocess. Other variables, such as time step index and physical time, are initialized.</p>
<h3 id="the-initializesolutionstep-method">The <code>InitializeSolutionStep</code> method</h3>
<p>This function is called at the start of every time step. The time step index is increased by one, the iteration index is set to zero and the OpenFOAM file directory is made in which the time step data needs to be stored (this last part is probably superfluous and can be removed at a later stage).</p>
<h3 id="the-solvesolutionstep-method">The <code>SolveSolutionStep</code> method</h3>
<p>The interface displacement is converted into an OpenFOAM-readable format (with the function <code>write_node_input</code>), after which the OpenFOAM-loop is called in a subprocess. After completion of the OpenFOAM-loop, the function <code>read_node_output</code> is called, which reads the interface loads from the corresponding OpenFOAM-directory (in the <code>postProcessing</code>-folder).</p>
<h3 id="the-finalizesolutionstep-method">The <code>FinalizeSolutionStep</code> method</h3>
<p>In this method, it is checked whether the other flow variables need to be written in an OpenFOAM-directory. This save-option is done in OpenFOAM.</p>
<h3 id="the-finalize-method">The <code>Finalize</code> method</h3>
<p>The OpenFOAM-subprocess, which was launched in the <code>Initialize</code> method, is killed.</p>
<h2 id="comments">Comments</h2>
<ul>
<li>Files with extension <code>.coco</code> are used to pass messages between Python and OpenFOAM. After sending a message from Python to OpenFOAM, the Python-script is paused until it receives the corresponding message from OpenFOAM. The OpenFOAM-solver is operating in an infinite <code>while</code>-loop until it receives a message from Python. Upon receipt of this message, OpenFOAM executes the corresponding action after which it sends a response to Python and reverts into its infinite loop (waiting mode). </li>
<li>The aforementioned messaging procedure implies that OpenFOAM is constantly running during execution of the CoCoNuT-simulation. It is closed by the Python-code only in the <code>Finalize</code> method, but if CoCoNuT crashes, the OpenFOAM-programme keeps running. The user should take care to kill that OpenFOAM-loop manually (using <code>kill</code> or <code>pkill</code> in the Linux-terminal, e.g. <code>pkill CoCoNuT_*</code>).</li>
<li>The interface displacement is stored in a <code>pointDisplacement</code>-field, which is read in by OpenFOAM in every iteration (this required some adaptation of the solver, see next section). The dynamic mesh motion is handled by OpenFOAM itself.</li>
<li>The interface loads are stored in the <code>postProcessing</code>-directory, under the names <code>PRESSURE</code> and <code>TRACTION</code>. These are constructed from a <code>controlDict</code>-file which is defined in the <code>_init_</code>-method of the solver wrapper in Python.</li>
</ul>
<h2 id="overview-of-an-openfoam-solver-used-in-coconut">Overview of an OpenFOAM-solver used in CoCoNuT</h2>
<p>Default OpenFOAM-solvers cannot be used in the CoCoNuT-framework, but need to be adjusted. Adapted solvers are stored in the solverwrapper-directory and receive the name <code>CoCoNuT_X</code>, where <code>X</code> is the name of the original solver, e.g. <code>pimpleFoam</code>. If a new solver needs to be adapted to operation in CoCoNuT, one of the already established solvers can work as an example. In brief, the following steps should be undertaken:</p>
<ul>
<li>Except for the initial <code>include</code>-statements, the entire solver code should be put in a loop that starts with <code>while(true)</code>.</li>
<li>Just before this while-loop, add the statement <code>runTime.run();</code>! This is important as it creates and initializes the functionObjects in the <code>controlDict</code>-file which will be used for storing the interface loads.</li>
<li>Due to the fact that the infinite loop is driven by <code>while(true)</code> and not the default OpenFOAM-expression <code>while(runTime.run())</code>, OpenFOAM does not check itself whether the final time step is reached. In proper CoCoNuT-operation, OpenFOAM is killed when the solver wrapper reaches the final time step, but this might not be the case if the OpenFOAM-solverwrapper is tested separately.</li>
<li>Inside the while-loop, a sleep-command is added such that the solver is not constantly checking the conditional statements. </li>
<li>The while-loop contains several conditional statements, each of which check whether the Python-code in CoCoNuT has sent a message to the OpenFOAM-solver. This message is sent by creating an empty file with a specific name in the OpenFOAM-directory. The following file names should be checked by the OpenFOAM-solver: <code>next.coco</code>, <code>continue.coco</code>, <code>save.coco</code>, <code>stop.coco</code>.     </li>
<li>If the file <code>next.coco</code> exists, the runTime-object should be increased by one. OpenFOAM should create a file <code>next_ready.coco</code> upon completion. Do not forget to delete the original <code>next.coco</code>-file, which is advised to do just before creating the <code>next_ready.coco</code>, so near the end of the <code>if</code>-clause.</li>
<li>If the file <code>continue.coco</code> exists, the flow equations need to be solved. This <code>if</code>-statement consequently contains most of the original solver definition, in which the flow equations are called in the same order as in the original CFD solver. OpenFOAM should create a file <code>continue_ready.coco</code> upon completion. Do not forget to delete the original <code>continue.coco</code>-file, which is advised to do just before creating the <code>continue_ready.coco</code>, so near the end of the <code>if</code>-clause.</li>
<li>If the file <code>save.coco</code> exists, OpenFOAM checks whether the flow variables should be stored in corresponding files, according to the user-defined save interval. OpenFOAM should create a file <code>save_ready.coco</code> upon completion. Do not forget to delete the original <code>save.coco</code>-file, which is advised to do just before creating the <code>save_ready.coco</code>, so near the end of the <code>if</code>-clause.</li>
<li>If the file <code>stop.coco</code> exists, a <code>break</code>-statement should end the infinite loop (the subprocess is also killed in the Python-code). OpenFOAM should create a file <code>stop_ready.coco</code> before breaking the <code>while</code>-loop. Do not forget to delete the original <code>stop.coco</code>-file, which is advised to do just before creating the <code>stop_ready.coco</code>, so near the end of the <code>if</code>-clause.</li>
</ul>
<h2 id="setting-up-a-new-case">Setting up a new case</h2>
<p>Following items should be present in the OpenFOAM-directory prior to launching CoCoNuT:</p>
<ul>
<li>The entire framework of the CFD-case in OpenFOAM which is to be used in the CoCoNuT simulation (so it should contain the <code>constant</code> and <code>system</code> directory as well as a time step directory). The working directory should be defined as if you would like to run it as a CFD case. The working directory is defined in a JSON-file and therefore the CoCoNuT-files do not need to be in the same folder as the OpenFOAM-case.</li>
<li>a JSON-file containing all of the settings stipulated above.</li>
</ul>
<p>Following items are taken care of by CoCoNuT, and must therefore not be included in the original OpenFOAM-directory:</p>
<ul>
<li><code>controlDict</code>-file with the necessary function objects to define the interface pressure/traction</li>
<li><code>dynamicMeshDict</code>-file which contains the settings for OpenFOAM's dynamic motion solver</li>
<li><code>decomposeParDict</code>-file with the necessary decomposition of the fluid domain (if <code>cores</code>&gt;1)</li>
</ul>
<h3 id="comments_1">Comments</h3>
<ul>
<li>It is probably best to derive a new case from a test case already present in the CoCoNuT-installation in order to copy its structure.</li>
<li>If you do not use an OpenFOAM-solver which is already converted for operation in CoCoNuT, you will need to adapt the solver yourself. This can be done in a rather straightforward way by taking a look at already implemented solvers. You should compile the new solver BEFORE loading the CoCoNuT-modules as the overwriting of compiler modules can break the  <code>wmake</code>-command. Once the new solver is compiled, it works fine even after loading the CoCoNuT-modules.</li>
<li>OpenFOAM is known for generating a lot of files, which is not different in CoCoNuT-operation. Make sure you have sufficient storage space on your cluster and that you are able to write a large number of files (the latter is specifically important when storing data in your home-directory).</li>
</ul>
<h2 id="version-specific-documentation">Version specific documentation</h2>
<h3 id="openfoam_41-openfoam-41">OpenFOAM_41 (OpenFOAM 4.1)</h3>
<p>This is currently the only version.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../kratos/" title="SolverWrapperKratos - StructuralMechanicsApplication" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                SolverWrapperKratos - StructuralMechanicsApplication
              </span>
            </div>
          </a>
        
        
          <a href="../python/" title="SolverWrapperPython" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                SolverWrapperPython
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:".."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>