
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="site_description">
      
      
      
      <link rel="icon" href="assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.3">
    
    
      
        <title>KratosStructure - CoCoNuT</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.edf004c2.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="light-green">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kratosstructure" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="CoCoNuT" class="md-header__button md-logo" aria-label="CoCoNuT" data-md-component="logo">
      
  <img src="images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CoCoNuT
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              KratosStructure
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="light-green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="light-green"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pyfsi/coconut" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pyfsi/coconut
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="index.html" class="md-tabs__link">
      Introduction
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="coupling_components.html" class="md-tabs__link md-tabs__link--active">
        Coupling components
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="data_structure.html" class="md-tabs__link">
      Data structure
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="docs.html" class="md-tabs__link">
      Documentation
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="examples.html" class="md-tabs__link">
        Examples
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="tests.html" class="md-tabs__link">
      Tests
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="CoCoNuT" class="md-nav__button md-logo" aria-label="CoCoNuT" data-md-component="logo">
      
  <img src="images/logo.png" alt="logo">

    </a>
    CoCoNuT
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pyfsi/coconut" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pyfsi/coconut
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Coupling components
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Coupling components" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Coupling components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="coupling_components.html" class="md-nav__link">
        General
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="convergence_criteria.html" class="md-nav__link">
        Convergence criteria
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" data-md-state="indeterminate" type="checkbox" id="__nav_2_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          Coupled solvers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Coupled solvers" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Coupled solvers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="coupled_solvers.html" class="md-nav__link">
        Coupled solvers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models.html" class="md-nav__link">
        Models
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="mappers.html" class="md-nav__link">
        Mappers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="predictors.html" class="md-nav__link">
        Predictors
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" type="checkbox" id="__nav_2_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_6">
          Solver wrappers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Solver wrappers" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          Solver wrappers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="solver_wrappers.html" class="md-nav__link">
        General
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="abaqus.html" class="md-nav__link">
        Abaqus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="fluent.html" class="md-nav__link">
        Fluent
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          KratosStructure
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="kratos_structure.html" class="md-nav__link md-nav__link--active">
        KratosStructure
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview-of-operation" class="md-nav__link">
    Overview of operation
  </a>
  
    <nav class="md-nav" aria-label="Overview of operation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-__init__-method" class="md-nav__link">
    The __init__ method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#files-created-during-simulation" class="md-nav__link">
    Files created during simulation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-a-new-case" class="md-nav__link">
    Setting up a new case
  </a>
  
    <nav class="md-nav" aria-label="Setting up a new case">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tip" class="md-nav__link">
    Tip
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#post-processing" class="md-nav__link">
    Post-processing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solver-coupling-convergence" class="md-nav__link">
    Solver coupling convergence
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-specific-documentation" class="md-nav__link">
    Version specific documentation
  </a>
  
    <nav class="md-nav" aria-label="Version specific documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#v91-91" class="md-nav__link">
    v91 (9.1)
  </a>
  
    <nav class="md-nav" aria-label="v91 (9.1)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kratos-installation" class="md-nav__link">
    Kratos installation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="openfoam.html" class="md-nav__link">
        OpenFOAM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="python.html" class="md-nav__link">
        Python
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="data_structure.html" class="md-nav__link">
        Data structure
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="docs.html" class="md-nav__link">
        Documentation
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" data-md-state="indeterminate" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="examples.html" class="md-nav__link">
        General
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" data-md-state="indeterminate" type="checkbox" id="__nav_5_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2">
          Breaking dam
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Breaking dam" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Breaking dam
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="breaking_dam_fluent2d_abaqus2d.html" class="md-nav__link">
        Fluent 2D - Abaqus 2D
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" data-md-state="indeterminate" type="checkbox" id="__nav_5_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3">
          Lid-driven cavity
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Lid-driven cavity" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Lid-driven cavity
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="lid_driven_cavity_fluent2d_kratos_structure2d.html" class="md-nav__link">
        Fluent2D - KratosStructure 2D
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="lid_driven_cavity_openfoam2d_kratos_structure2d.html" class="md-nav__link">
        OpenFOAM2D - KratosStructure 2D
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" data-md-state="indeterminate" type="checkbox" id="__nav_5_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4">
          Tube
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tube" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Tube
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tube_tube_flow_tube_ringmodel.html" class="md-nav__link">
        Python TubeFlow - Python TubeRingmodel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tube_tube_flow_tube_structure.html" class="md-nav__link">
        Python TubeFlow - Python TubeStructure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tube_tube_flow_tube_structure_analytical.html" class="md-nav__link">
        Python TubeFlow - Python TubeStructure - Analytical
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tube_tube_flow_tube_structure_surrogate.html" class="md-nav__link">
        Python TubeFlow - Python TubeStructure - Surrogate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tube_tube_flow_abaqus2d.html" class="md-nav__link">
        Python TubeFlow - Abaqus 2D
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tube_fluent2d_tube_structure.html" class="md-nav__link">
        Fluent 2D - Python TubeStructure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tube_fluent2d_abaqus2d.html" class="md-nav__link">
        Fluent 2D - Abaqus 2D
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tube_fluent2d_abaqus2d_steady.html" class="md-nav__link">
        Fluent 2D - Abaqus 2D - Steady
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tube_fluent2d_abaqus2d_surrogate.html" class="md-nav__link">
        Fluent 2D - Abaqus 2D - Surrogate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tube_fluent3d_abaqus2d.html" class="md-nav__link">
        Fluent 3D - Abaqus 2D
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tube_fluent3d_abaqus3d.html" class="md-nav__link">
        Fluent 3D - Abaqus 3D
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tube_fluent3d_kratos_structure3d.html" class="md-nav__link">
        Fluent 3D - KratosStructure 3D
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tube_openfoam3d_abaqus3d.html" class="md-nav__link">
        OpenFOAM 3D - Abaqus 3D
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tube_openfoam3d_kratos_structure3d.html" class="md-nav__link">
        OpenFOAM 3D - KratosStructure 3D
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5" data-md-state="indeterminate" type="checkbox" id="__nav_5_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_5">
          Turek benchmark
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Turek benchmark" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          Turek benchmark
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="turek_fluent2d_abaqus2d.html" class="md-nav__link">
        Fluent 2D - Abaqus 2D
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="turek_fluent2d_abaqus2d_steady.html" class="md-nav__link">
        Fluent 2D - Abaqus 2D - Steady
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="test_single_solver.html" class="md-nav__link">
        Test single solver
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="tests.html" class="md-nav__link">
        Tests
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

<h1 id="kratosstructure">KratosStructure</h1>
<p>KratosMultiphysics is an open source framework for finite element simulations. More information on Kratos and the source code can be found on the <a href="https://github.com/KratosMultiphysics">Kratos GitHub page</a>. 
The solver wrapper of <code>StructuralMechanicsApplication</code> from Kratos has been implemented in CoCoNuT. This a documentation of this solver wrapper. </p>
<h2 id="parameters">Parameters</h2>
<p>This section describes the parameters in the JSON file, listed in alphabetical order.</p>
<table>
<thead>
<tr>
<th align="right">parameter</th>
<th align="center">type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right"><code>debug</code></td>
<td align="center">bool</td>
<td>(optional) Default: <code>false</code>. For every iteration, text files are saved with the input and output data of the solver.</td>
</tr>
<tr>
<td align="right"><code>delta_t</code></td>
<td align="center">double</td>
<td>(optional) Fixed time step size in structural solver.</td>
</tr>
<tr>
<td align="right"><code>input_file</code></td>
<td align="center">str</td>
<td>Project parameters file used by Kratos in JSON format. In the <a href="https://pyfsi.github.io/coconut/tube_fluent3d_kratos_structure3d">example cases</a>, this is typically called <em><code>ProjectParameters.json</code></em>.</td>
</tr>
<tr>
<td align="right"><code>interface_input</code></td>
<td align="center">dict</td>
<td>List of dictionaries that describes the input <code>Interface</code>. This provides the  interface boundary conditions for the Kratos solver. Each entry in the list has two keys: <code>model_part</code> and <code>variables</code>, with values as name of the model part and list of input variables, respectively. The input variables in the list should be chosen from the  <code>variables_dimensions</code> <code>dict</code> in  the file <em><code>coconut/data_structure/variables.py</code></em>. The model part name must be the concatenation of an entry from <code>kratos_interface_sub_model_parts_list</code> and the string <code>_input</code>.</td>
</tr>
<tr>
<td align="right"><code>interface_output</code></td>
<td align="center">dict</td>
<td>Analogous to <code>interface_input</code>, but here the name must be the concatenation of an entry from <code>kratos_interface_sub_model_parts_list</code> and the string <code>_output</code>. The entries in the list provides boundary conditions for the other solver(s) participating in the coupled simulation.</td>
</tr>
<tr>
<td align="right"><nobr><code>kratos_interface_sub_model_parts_list</code><nobr></td>
<td align="center">str</td>
<td>Names of sub-model parts used for input and output in Kratos.</td>
</tr>
<tr>
<td align="right"><code>pressure_directions</code></td>
<td align="center">list</td>
<td>A list containing 1 or -1 designating the direction in which the pressure is applied: a positive value means NEGATIVE_FACE_PRESSURE is used. This implies applying a pressure on the - face, which hence goes in the direction of the normal (-1,1), in other words 1 should be used when the normal points outwards from the fluid domain. A negative unit value results in the opposite directions, in other words -1 should be used when the normal points into the fluid domain. The length of the list must be equal to that of <code>kratos_interface_sub_model_parts_list</code>.</td>
</tr>
<tr>
<td align="right"><code>print_coupling_convergence</code></td>
<td align="center">bool</td>
<td>(optional) Default <code>false</code>. If <code>true</code> and if the solver coupling convergence is checked, a statement is printed when the solver converges in the first solver iteration, see <a href="#solver-coupling-convergence">solver coupling convergence</a>.</td>
</tr>
<tr>
<td align="right"><code>residual_variables</code></td>
<td align="center">list</td>
<td>(optional) A list containing variables as reported in the log file (e.g. DISPLACEMENT, RESIDUAL or RESIDUAL DISPLACEMENT) whose residuals you need to output. If provided, this will output the last residual for each FSI-coupling iteration in <em><code>&lt;case_directory&gt;/residuals.csv</code></em>. For different element types, the names might be different and/or changes might be required to parse the log file. For the correct names see the Kratos log file.</td>
</tr>
<tr>
<td align="right"><code>structure_iterations</code></td>
<td align="center">int</td>
<td>(optional) Maximum number of Newton iterations in Kratos per coupling iteration. If not provided, the value in <code>input_file</code> is used.</td>
</tr>
<tr>
<td align="right"><code>timestep_start</code></td>
<td align="center">int</td>
<td>(optional) Time step to (re)start a transient FSI calculation from. If 0 is given, the simulation starts from t = 0, else the code looks for the relevant case and data files.</td>
</tr>
<tr>
<td align="right"><code>working_directory</code></td>
<td align="center">str</td>
<td>Path to the working directory (i.e. where the <code>input_file</code> for Kratos is located), either absolute or relative w.r.t the current directory (i.e. from where the analysis is started).</td>
</tr>
</tbody>
</table>
<p><code>timestep_start</code> and <code>delta_t</code> are usually defined in the parameters of the <code>coupled_solver</code>. However, they can also be given directly as a parameter of the solver wrapper (e.g. for standalone testing). If they are defined both in the coupled solver and in the solver wrapper, then the former value is used and a warning is printed.</p>
<p>If different parameters are used with different Kratos versions, this should be specified both in this section and in the version specific documentation section.</p>
<h2 id="overview-of-operation">Overview of operation</h2>
<p>The solver wrapper consists of 2 files, where <code>X</code> is the Kratos version without decimal, e.g. for version 6.0 this becomes <code>60</code>:</p>
<ul>
<li><em><code>vX.py</code></em>: defines the <code>SolverWrapperKratosStructureX</code> class,</li>
<li><em><code>run_kratos_structural_X.py</code></em>: The Python file which runs Kratos in the background. This interacts with CoCoNuT for coupling.</li>
</ul>
<h3 id="the-__init__-method">The <code>__init__</code> method</h3>
<p>During initialization, the <em><code>ProjectParameters.json</code></em> file required for Kratos simulation is read and modified (parameter values are filled in) in the <code>working_directory</code>. 
One additional parameter called  <code>interface_sub_model_parts_list</code> is added in the <em><code>ProjectParameters.json</code></em> that tells Kratos about the interface model parts used in the coupling. 
Kratos structural simulation is then started in that directory using the parameter <code>cores</code> (multiprocessing not implemented yet). 
The solver wrapper waits for the Kratos simulation to output interface sub-model parts nodes, so that <code>SolverWrapperKratosStructureX</code> can create model parts in CoCoNuT for each entry in <code>interface_input</code> and <code>interface_output</code>. 
Finally, the interfaces are created.</p>
<h3 id="files-created-during-simulation">Files created during simulation</h3>
<ul>
<li>The interface sub-model parts nodes are saved as <em><code>&lt;sub_model_part_name&gt;_nodes.csv</code></em>.</li>
<li>The displacement from Kratos is written in a file named <em><code>&lt;sub_model_part_name&gt;_displacement.csv</code></em>.</li>
<li>Pressure and tractions are passed from Python to Kratos with files of the form <em><code>&lt;sub_model_part_name&gt;_pressure.csv</code></em> and <em><code>&lt;sub_model_part_name&gt;_surface_load.csv</code></em>, respectively.</li>
<li>Files with extension <em><code>.coco</code></em> are used to pass messages between Python and Kratos.</li>
</ul>
<h2 id="setting-up-a-new-case">Setting up a new case</h2>
<p>Following items should be set up and saved in the <code>working_directory</code> (this list may be non-exhaustive):</p>
<ul>
<li><em><code>ProjectParameters.json</code></em> with all the required parameters (see the <a href="https://pyfsi.github.io/coconut/tube_fluent3d_kratos_structure3d">example cases</a>)</li>
<li>Mesh file with extension <em><code>.mdpa</code></em></li>
<li><em><code>StructuralMaterials.json</code></em> with the material properties</li>
</ul>
<p>Following items are taken care of by CoCoNuT, and must therefore will be automatically changed at the begining of the simulation:</p>
<ul>
<li>The start time (<code>timestep_start</code>)</li>
<li>The time step (<code>delta_t</code>)</li>
<li>Initialization of the solution field</li>
</ul>
<h3 id="tip">Tip</h3>
<p><div class="highlight"><pre><span></span><code>When starting a simulation from time=0 after having restarted in the same folder, clean the directory or delete the case folder and copy the required files from a &quot;set up&quot; folder.
</code></pre></div>
The reason for this is that the <code>ProjectParameters.json</code> file is modified when performing restart in such a way that it can no longer be used to start from time=0.</p>
<h2 id="post-processing">Post-processing</h2>
<p>Kratos <code>StructuralMechanicsApplication</code> v91 allows for saving VTK files. The number of files saved is set in <code>ProjectParameters.json</code> and is not modified by CoCoNuT.
Note that the zeroth instance corresponds to the first time step.</p>
<h2 id="solver-coupling-convergence">Solver coupling convergence</h2>
<p>The convergence criterion <a href="https://pyfsi.github.io/coconut/convergence_criteria#solver-coupling-convergence">solver coupling convergence</a> is implemented for the Kratos StructuralMechanics solver wrapper.</p>
<p>When using the <code>residual_criterion</code> in Kratos as convergence criterion, it's important to set the relative tolerance to <code>-1</code>, effectively disabling it.
This is needed because Kratos sets the relative residual to zero in the first time step, wrongly leading to immediate convergence.
Although this is also the case when other coupling convergence criteria are used, it deserves special attention in case of the solver coupling convergence criterion.</p>
<p>Below, an example of the <em><code>ProjectParameters.json</code></em> file is included using the <code>and_criterion</code>.
This criterion combines the displacement and residual criteria and declares the solver converged only if both criteria are satisfied.
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="err">...</span>
  <span class="nt">&quot;convergence_criterion&quot;</span><span class="p">:</span> <span class="s2">&quot;and_criterion&quot;</span><span class="p">,</span>
  <span class="nt">&quot;displacement_relative_tolerance&quot;</span><span class="p">:</span> <span class="mf">1e-7</span><span class="p">,</span>
  <span class="nt">&quot;displacement_absolute_tolerance&quot;</span><span class="p">:</span> <span class="mf">1e-7</span><span class="p">,</span>
  <span class="nt">&quot;residual_relative_tolerance&quot;</span><span class="p">:</span> <span class="mi">-1</span><span class="p">,</span>
  <span class="nt">&quot;residual_absolute_tolerance&quot;</span><span class="p">:</span> <span class="mf">1e-7</span><span class="p">,</span>
  <span class="err">...</span>
<span class="p">}</span>
</code></pre></div></p>
<h2 id="version-specific-documentation">Version specific documentation</h2>
<h3 id="v91-91">v91 (9.1)</h3>
<p>The <em><code>ProjectParameters.json</code></em> required by Kratos is slightly different in the version 9.1. The user can refer to the <a href="https://github.com/KratosMultiphysics/Kratos/tree/v9.1">source code</a> for the changes.
Alternatively, the user can use the file in <em><code>tests/solver_wrappers/kratos_structure/test_v91/setup_kratos</code></em> as a reference.
The most important changes with respect to older versions include:</p>
<ul>
<li>The adaptation of model part names to include parents, e.g. from <code>Parts_tube</code> to <code>Structure.Parts_tube</code></li>
<li>The removal of the keys <code>problem_domain_sub_model_part_list</code> and <code>processes_sub_model_part_list</code> in <code>solver_settings</code></li>
</ul>
<p>Based on testing, restart works with the <code>MembraneElement</code>, <code>ShellThickElement</code> and <code>ShellThickElementCorotational</code>. More testing is required to ascertain if the restart works with the other<code>elements</code> in Kratos.</p>
<h4 id="kratos-installation">Kratos installation</h4>
<p>This version supports installation using <code>pip</code>. To install only StructuralMechanicsApplication of Kratos, use the following command:
<div class="highlight"><pre><span></span><code>pip install KratosMultiphysics KratosStructuralMechanicsApplication KratosLinearSolversApplication
</code></pre></div>
Note, the linear solvers in <code>KratosLinearSolversApplication</code> is sometimes used by the <code>StructuralMechanicsApplication</code>, therefore it is installed along with it.</p>
<p>To install all the available applications in Kratos, use the following command:
<div class="highlight"><pre><span></span><code>pip install KratosMultiphysics-all
</code></pre></div></p>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="fluent.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Fluent" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Fluent
            </div>
          </div>
        </a>
      
      
        
        <a href="openfoam.html" class="md-footer__link md-footer__link--next" aria-label="Next: OpenFOAM" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              OpenFOAM
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.expand", "navigation.tracking", "toc.integrate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "assets/javascripts/workers/search.0bbba5b5.min.js"}</script>
    
    
      <script src="assets/javascripts/bundle.e1a181d9.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>